<script lang="ts">
	import Button from '../common/Button.svelte';
	
	let {
		isOpen = false,
		onClose = () => {}
	}: {
		isOpen?: boolean;
		onClose?: () => void;
	} = $props();
	
	function handleClose() {
		// ì•ˆë‚´ë¥¼ ì½ì—ˆë‹¤ëŠ” í‘œì‹œ
		if (typeof window !== 'undefined') {
			localStorage.setItem('teacher_guide_read', 'true');
		}
		onClose();
	}
	
	function handleBackdropClick(event: MouseEvent) {
		if ((event.target as HTMLElement).classList.contains('modal-backdrop')) {
			handleClose();
		}
	}
</script>

{#if isOpen}
	<div class="modal-backdrop" onclick={handleBackdropClick} role="dialog" aria-modal="true">
		<div class="modal-content">
			<div class="modal-header">
				<h2>ğŸ‘¨â€ğŸ« êµì‚¬ í‰ê°€ì ì•ˆë‚´</h2>
				<button class="close-btn" onclick={handleClose}>Ã—</button>
			</div>
			
			<div class="modal-body">
				<section class="intro-section">
					<h3>ğŸ¯ ì—°êµ¬ ëª©ì </h3>
					<p>ì´ í‰ê°€ëŠ” <strong>AI ê¸°ë°˜ ìˆ˜í•™ í•™ìŠµ ëŒ€í™” ì‹œìŠ¤í…œì˜ êµìœ¡ì  íš¨ê³¼ì„±</strong>ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.</p>
					<p>ì„ ìƒë‹˜ê»˜ì„œ ì œê³µí•´ì£¼ì‹  í‰ê°€ ë°ì´í„°ëŠ” AI ì‹œìŠ¤í…œ ê°œì„ ê³¼ êµìœ¡ ì—°êµ¬ì— í™œìš©ë©ë‹ˆë‹¤.</p>
				</section>
				
				<section class="task-section">
					<h3>ğŸ“‹ í‰ê°€ ê³¼ì œ</h3>
					<div class="task-box">
						<div class="task-item">
							<span class="task-icon">1ï¸âƒ£</span>
							<div>
								<strong>ì„¸ì…˜ ì±„ì  (ëª©í‘œ: 100ê°œ)</strong>
								<p>v4.3 ë£¨ë¸Œë¦­ì„ ì‚¬ìš©í•˜ì—¬ í•™ìƒ-AI ëŒ€í™” ì„¸ì…˜ì„ í‰ê°€í•©ë‹ˆë‹¤.</p>
							</div>
						</div>
						<div class="task-item">
							<span class="task-icon">2ï¸âƒ£</span>
							<div>
								<strong>ë£¨ë¸Œë¦­ ê²€í† </strong>
								<p>ê° ë£¨ë¸Œë¦­ í•­ëª©ì˜ íƒ€ë‹¹ì„±ê³¼ ê°œì„ ì ì— ëŒ€í•œ ì˜ê²¬ì„ ì‘ì„±í•©ë‹ˆë‹¤.</p>
							</div>
						</div>
					</div>
				</section>
				
				<section class="rubric-section">
					<h3>ğŸ“Š v4.3 ë£¨ë¸Œë¦­ êµ¬ì¡°</h3>
					<div class="rubric-overview">
						<div class="rubric-category">
							<div class="category-header">A. ì§ˆë¬¸ ì˜ì—­ (15ì )</div>
							<ul>
								<li><strong>A1. ìˆ˜í•™ì  ì „ë¬¸ì„±</strong> - ê°œë… ì •í™•ì„±, ìš©ì–´ ì‚¬ìš©, ìœ„ê³„ì„±</li>
								<li><strong>A2. ì§ˆë¬¸ êµ¬ì¡°í™”</strong> - ë…¼ë¦¬ì  ì—°ê³„, ì„ í–‰ ì§€ì‹, ëª©í‘œ ëª…ì‹œ</li>
								<li><strong>A3. í•™ìŠµ ë§¥ë½ ì ìš©</strong> - ë‹¨ì› ì‹ë³„, êµìœ¡ê³¼ì • ë°˜ì˜</li>
							</ul>
						</div>
						<div class="rubric-category">
							<div class="category-header">B. ì‘ë‹µ ì˜ì—­ (15ì )</div>
							<ul>
								<li><strong>B1. í•™ìŠµì ë§ì¶¤ë„</strong> - ì‰¬ìš´ ì„¤ëª…, ìˆ˜ì¤€ ë°˜ì˜</li>
								<li><strong>B2. ì„¤ëª…ì˜ ì²´ê³„ì„±</strong> - ë…¼ë¦¬ì  êµ¬ì¡°, ë‹¨ê³„ë³„ í™•ì¸</li>
								<li><strong>B3. í•™ìŠµ ë‚´ìš© í™•ì¥ì„±</strong> - í™•ì¥ í™œë™, ê°œë… ì—°ê³„</li>
							</ul>
						</div>
						<div class="rubric-category">
							<div class="category-header">C. ë§¥ë½ ì˜ì—­ (10ì )</div>
							<ul>
								<li><strong>C1. ëŒ€í™” ì¼ê´€ì„±</strong> - ë¬¸ë§¥ ìœ ì§€, ì´ì „ ëŒ€í™” ì°¸ì¡°</li>
								<li><strong>C2. í•™ìŠµ ê³¼ì • ì§€ì›ì„±</strong> - ë™ê¸° ì§€ì›, ê¸ì •ì  í”¼ë“œë°±</li>
							</ul>
						</div>
					</div>
					<div class="rubric-note">
						<strong>ì±„ì  ë°©ì‹:</strong> ê° í•­ëª©ì€ 4ê°œ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ êµ¬ì„±ë˜ë©°, ì²´í¬ëœ ê°œìˆ˜ + 1ì ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤ (1~5ì )
					</div>
				</section>
				
				<section class="workflow-section">
					<h3>ğŸ”„ í‰ê°€ ì›Œí¬í”Œë¡œìš°</h3>
					<div class="workflow-steps">
						<div class="step">
							<span class="step-num">1</span>
							<div class="step-content">
								<strong>ì„¸ì…˜ ì±„ì </strong>
								<p>â€¢ ëœë¤ìœ¼ë¡œ ì œì‹œë˜ëŠ” ì„¸ì…˜ì˜ ëŒ€í™” ë‚´ìš© ê²€í† </p>
								<p>â€¢ ê° ë£¨ë¸Œë¦­ í•­ëª©ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ í‰ê°€</p>
								<p>â€¢ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì„¸ì…˜ ë¡œë“œ (100ê°œ ëª©í‘œ)</p>
							</div>
						</div>
						<div class="step">
							<span class="step-num">2</span>
							<div class="step-content">
								<strong>ë£¨ë¸Œë¦­ í‰ê°€</strong>
								<p>â€¢ í•­ëª©ë³„ë¡œ ì„¸ì…˜ì„ í•„í„°ë§í•˜ì—¬ ê²€í† </p>
								<p>â€¢ ê° ë£¨ë¸Œë¦­ í•­ëª©ì˜ íƒ€ë‹¹ì„±ì— ëŒ€í•œ ì˜ê²¬ ì‘ì„±</p>
								<p>â€¢ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ ì œì•ˆ</p>
							</div>
						</div>
					</div>
				</section>
				
				<section class="note-section">
					<h3>âš ï¸ ìœ ì˜ì‚¬í•­</h3>
					<ul class="note-list">
						<li>í‰ê°€ ë°ì´í„°ëŠ” ì—°êµ¬ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ë©° ìµëª… ì²˜ë¦¬ë©ë‹ˆë‹¤</li>
						<li>ì„¸ì…˜ ì±„ì ì€ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë°©ì‹ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì§„í–‰ë©ë‹ˆë‹¤</li>
						<li>ê±´ë„ˆë›°ê¸° ê¸°ëŠ¥ìœ¼ë¡œ í‰ê°€í•˜ê¸° ì–´ë ¤ìš´ ì„¸ì…˜ì€ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
						<li>ì§„í–‰ ìƒí™©ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤</li>
					</ul>
				</section>
			</div>
			
			<div class="modal-footer">
				<Button variant="primary" onclick={handleClose}>
					ì‹œì‘í•˜ê¸°
				</Button>
			</div>
		</div>
	</div>
{/if}

<style>
	.modal-backdrop {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.5);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 1000;
		padding: 2rem;
	}
	
	.modal-content {
		background: var(--maice-bg-card);
		border-radius: 16px;
		max-width: 800px;
		width: 100%;
		max-height: 90vh;
		overflow: hidden;
		box-shadow: var(--maice-shadow-xl);
		display: flex;
		flex-direction: column;
	}
	
	.modal-header {
		padding: 1.5rem 2rem;
		border-bottom: 2px solid var(--maice-border-primary);
		display: flex;
		justify-content: space-between;
		align-items: center;
		background: var(--maice-bg-secondary);
	}
	
	.modal-header h2 {
		margin: 0;
		font-size: 1.5rem;
		font-weight: 600;
		color: var(--maice-text-primary);
	}
	
	.close-btn {
		background: none;
		border: none;
		font-size: 2rem;
		cursor: pointer;
		color: var(--maice-text-muted);
		line-height: 1;
		padding: 0;
		width: 32px;
		height: 32px;
		display: flex;
		align-items: center;
		justify-content: center;
		border-radius: 4px;
		transition: all 0.2s;
	}
	
	.close-btn:hover {
		background: var(--maice-bg-hover);
		color: var(--maice-text-primary);
	}
	
	.modal-body {
		padding: 2rem;
		overflow-y: auto;
		flex: 1;
	}
	
	section {
		margin-bottom: 2rem;
	}
	
	section:last-child {
		margin-bottom: 0;
	}
	
	h3 {
		margin: 0 0 1rem 0;
		font-size: 1.125rem;
		font-weight: 600;
		color: var(--maice-text-primary);
	}
	
	p {
		margin: 0 0 0.75rem 0;
		line-height: 1.6;
		color: var(--maice-text-secondary);
	}
	
	.intro-section {
		padding: 1.5rem;
		background: var(--maice-bg-secondary);
		border-radius: 12px;
		border-left: 4px solid var(--maice-primary);
	}
	
	.task-box {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}
	
	.task-item {
		display: flex;
		gap: 1rem;
		padding: 1rem;
		background: var(--maice-bg-secondary);
		border-radius: 8px;
	}
	
	.task-icon {
		font-size: 1.5rem;
		flex-shrink: 0;
	}
	
	.task-item strong {
		display: block;
		margin-bottom: 0.25rem;
		color: var(--maice-text-primary);
	}
	
	.task-item p {
		margin: 0;
		font-size: 0.9375rem;
		color: var(--maice-text-muted);
	}
	
	.rubric-overview {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}
	
	.rubric-category {
		padding: 1rem;
		background: var(--maice-bg-secondary);
		border-radius: 8px;
		border-left: 3px solid var(--maice-primary);
	}
	
	.category-header {
		font-weight: 600;
		font-size: 1rem;
		margin-bottom: 0.75rem;
		color: var(--maice-text-primary);
	}
	
	.rubric-category ul {
		margin: 0;
		padding-left: 1.5rem;
	}
	
	.rubric-category li {
		margin-bottom: 0.5rem;
		color: var(--maice-text-secondary);
		line-height: 1.5;
	}
	
	.rubric-note {
		margin-top: 1rem;
		padding: 1rem;
		background: var(--maice-warning-bg);
		color: var(--maice-warning-text);
		border-radius: 8px;
		font-size: 0.9375rem;
	}
	
	.workflow-steps {
		display: flex;
		flex-direction: column;
		gap: 1.5rem;
	}
	
	.step {
		display: flex;
		gap: 1rem;
	}
	
	.step-num {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
		background: var(--maice-primary);
		color: white;
		border-radius: 50%;
		font-weight: 600;
		font-size: 1.125rem;
		flex-shrink: 0;
	}
	
	.step-content {
		flex: 1;
	}
	
	.step-content strong {
		display: block;
		margin-bottom: 0.5rem;
		font-size: 1rem;
		color: var(--maice-text-primary);
	}
	
	.step-content p {
		margin: 0.25rem 0;
		font-size: 0.9375rem;
		color: var(--maice-text-secondary);
	}
	
	.note-list {
		margin: 0;
		padding-left: 1.5rem;
	}
	
	.note-list li {
		margin-bottom: 0.5rem;
		color: var(--maice-text-secondary);
		line-height: 1.6;
	}
	
	.modal-footer {
		padding: 1.5rem 2rem;
		border-top: 1px solid var(--maice-border-primary);
		display: flex;
		justify-content: flex-end;
		background: var(--maice-bg-secondary);
	}
</style>

